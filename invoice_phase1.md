# 1回目請求書 作業項目・工数内訳

## 請求概要
- **作業時間**: 150時間
- **作業フェーズ**: Phase 0（完了） + Phase 1（認証システム・一部）
- **期間**: Week 1-4（約4週間）

---

## 📋 作業項目・工数詳細

### Phase 0: プロジェクト基盤構築（70時間）

#### 1. プロジェクト構造設計・技術スタック選定（12時間）
- プロジェクトディレクトリ構造の設計
- 技術スタックの選定・検討
  - フロントエンド: Next.js 14 + TypeScript
  - バックエンド: FastAPI (Python 3.11+)
  - データベース: PostgreSQL 15
  - キャッシュ: Redis
- 命名規則・コーディング規約の策定
- Git リポジトリの初期設定

#### 2. 開発環境構築（Docker環境）（18時間）
- Docker Compose設定ファイルの作成
- バックエンド用Dockerfile作成
- フロントエンド用Dockerfile作成
- 開発環境の動作確認・テスト
- 環境変数設定ファイル（.env.example）の作成
- README.md（開発環境セットアップ手順）の作成

#### 3. データベース設計・構築（25時間）
- ER図の作成（14テーブル）
- データベーススキーマ設計書の作成
- PostgreSQLスキーマ定義（schema.sql）の作成
- インデックス戦略の設計
- 外部キー制約・整合性チェックの設計
- マイグレーションスクリプトの準備
- 開発用初期データ（シードデータ）の設計

#### 4. API設計書作成（OpenAPI仕様書）（10時間）
- RESTful API エンドポイント設計
- リクエスト/レスポンス形式の定義
- 認証フロー設計（JWT）
- 権限マトリックス設計（RBAC）
- エラーハンドリング仕様の定義
- OpenAPI (Swagger) 仕様書の作成

#### 5. フロントエンド設計書作成（5時間）
- ページ構成設計（管理者・企業・スタッフ）
- コンポーネント設計
- 状態管理戦略の設計
- UIデザインシステムの定義
- レスポンシブ対応方針の決定

---

### Phase 1: 認証システム実装（80時間）

#### 6. バックエンド: 認証基盤の実装（35時間）
- ユーザーモデルの実装（SQLAlchemy）
- 認証依存関係の実装（JWT）
- アクセストークン・リフレッシュトークンの生成ロジック
- パスワードハッシュ化（bcrypt）の実装
- JWT トークン検証ミドルウェアの実装
- セッション管理（Redis連携）の実装

#### 7. バックエンド: 認証API実装（25時間）
- ユーザー登録API（POST /api/v1/auth/register）
- ログインAPI（POST /api/v1/auth/login）
- ログアウトAPI（POST /api/v1/auth/logout）
- リフレッシュトークンAPI（POST /api/v1/auth/refresh）
- パスワードリセット申請API（POST /api/v1/auth/password-reset）
- パスワードリセット実行API（POST /api/v1/auth/password-reset/confirm）
- 認証エラーハンドリングの実装

#### 8. フロントエンド: 認証画面実装（15時間）
- ログイン画面の実装
- ユーザー登録画面の実装
- パスワードリセット画面の実装
- 認証状態管理（JWTトークンの保存・取得）
- APIクライアント（認証ヘッダーの自動付与）
- 認証ガード（未認証時のリダイレクト）の実装

#### 9. 権限管理（RBAC）実装（5時間）
- ロール定義（管理者・企業・スタッフ）
- 権限チェックミドルウェアの実装
- リソースレベルの権限チェック
- フロントエンド側の権限制御（コンポーネント表示制御）

---

## ✅ 成果物

### Phase 0 成果物
- ✅ 開発環境（Docker Compose環境）
- ✅ データベーススキーマ（14テーブル設計）
- ✅ API仕様書（OpenAPI形式）
- ✅ プロジェクト構造設計書
- ✅ フロントエンド設計書
- ✅ 認証・セキュリティ設計書

### Phase 1 成果物（一部）
- ✅ 認証システム（ログイン・ログアウト・パスワードリセット）
- ✅ JWT認証機能
- ✅ 権限管理（RBAC）基盤
- ✅ 認証画面（ログイン・登録・パスワードリセット）

---

## 📊 時間配分サマリー

| カテゴリ | 作業内容 | 時間 |
|---------|---------|------|
| **Phase 0** | **プロジェクト基盤構築** | **70時間** |
| 1 | プロジェクト構造設計・技術スタック選定 | 12時間 |
| 2 | 開発環境構築（Docker環境） | 18時間 |
| 3 | データベース設計・構築 | 25時間 |
| 4 | API設計書作成（OpenAPI仕様書） | 10時間 |
| 5 | フロントエンド設計書作成 | 5時間 |
| | | |
| **Phase 1** | **認証システム実装** | **80時間** |
| 6 | バックエンド: 認証基盤の実装 | 35時間 |
| 7 | バックエンド: 認証API実装 | 25時間 |
| 8 | フロントエンド: 認証画面実装 | 15時間 |
| 9 | 権限管理（RBAC）実装 | 5時間 |
| | | |
| **合計** | | **150時間** |

---

## 📝 備考

- 本作業により、システムの基盤構築と認証機能の実装が完了します
- 次のフェーズ（Phase 1 残り: ユーザー管理機能）に進む準備が整いました
- 全ての設計書は `docs/` ディレクトリに格納されています
- 開発環境は Docker Compose により、すぐに起動可能な状態です



